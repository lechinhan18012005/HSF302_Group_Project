<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>

    <title>Admin Dashboard</title>

    <link th:href="@{https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css}" rel="stylesheet"/>
    <link th:href="@{/css/styles.css}" rel="stylesheet"/>
    <script th:src="@{https://use.fontawesome.com/releases/v6.3.0/js/all.js}" crossorigin="anonymous"></script>

    <!-- Custom style cho Dashboard -->
    <style>
        :root {
            --primary-color: #81c408;
            --primary-soft: rgba(129, 196, 8, 0.06);
            --text-main: #202124;
            --text-muted: #6b7280;
            --border-soft: #e5e7eb;
            --bg-page: #f5f7fb;
        }

        body.sb-nav-fixed {
            background: var(--bg-page);
            color: var(--text-main);
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        /* Tiêu đề trang */
        .page-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }

        .page-title {
            font-size: 1.6rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .page-title-badge {
            font-size: .75rem;
            padding: 2px 8px;
            border-radius: 999px;
            background: var(--primary-soft);
            color: var(--primary-color);
            font-weight: 500;
        }

        .page-actions .btn-refresh {
            border-radius: 999px;
            border: 1px solid var(--border-soft);
            padding: 6px 14px;
            font-size: .85rem;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #fff;
            color: var(--text-muted);
            transition: all .2s ease;
        }

        .page-actions .btn-refresh:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
            box-shadow: 0 8px 18px rgba(15, 23, 42, 0.08);
        }

        /* Breadcrumb */
        .breadcrumb {
            background: transparent;
            padding: 0;
            margin-bottom: 1.5rem;
            font-size: .88rem;
        }

        .breadcrumb-item + .breadcrumb-item::before {
            color: var(--text-muted);
        }

        .breadcrumb-item a {
            color: var(--text-muted);
            text-decoration: none;
        }

        .breadcrumb-item.active {
            color: var(--primary-color);
            font-weight: 500;
        }

        /* Card thống kê */
        .stat-card {
            background: #ffffff;
            border-radius: 18px;
            border: 1px solid var(--border-soft);
            padding: 18px 18px 14px;
            box-shadow: 0 18px 35px rgba(15, 23, 42, 0.06);
            transition: all .2s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: "";
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(129,196,8,.05), transparent);
            opacity: 0;
            transition: opacity .2s ease;
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 22px 45px rgba(15, 23, 42, 0.10);
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-card-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            position: relative;
            z-index: 1;
        }

        .stat-title {
            font-size: .95rem;
            font-weight: 500;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 1.7rem;
            font-weight: 600;
            color: var(--text-main);
            line-height: 1.2;
        }

        .stat-chip {
            font-size: .75rem;
            padding: 2px 8px;
            border-radius: 999px;
            background: var(--primary-soft);
            color: var(--primary-color);
            display: inline-flex;
            align-items: center;
            gap: 6px;
            margin-top: 4px;
        }

        .stat-icon {
            width: 46px;
            height: 46px;
            border-radius: 16px;
            background: var(--primary-soft);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
            font-size: 1.3rem;
        }

        .stat-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 14px;
            font-size: .8rem;
            position: relative;
            z-index: 1;
        }

        .stat-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-weight: 500;
            text-decoration: none;
            color: var(--primary-color);
        }

        .stat-link i {
            font-size: .75rem;
        }

        .stat-note {
            color: var(--text-muted);
            font-size: .78rem;
        }

        /* Link chung */
        a {
            text-decoration: none;
        }

        a:hover {
            text-decoration: none;
        }

        @media (max-width: 767.98px) {
            .page-header {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>
</head>

<body class="sb-nav-fixed">

<!-- Header: thanh điều hướng trên cùng -->
<div th:replace="~{admin/layout/header :: header}"></div>

<!-- Include notification fragment so toasts are available on this page -->
<div th:replace="~{admin/layout/notification :: notification}"></div>

<div id="layoutSidenav">
    <!-- Sidebar: điều hướng bên trái -->
    <div th:replace="~{admin/layout/sidebar :: sidebar}"></div>

    <div id="layoutSidenav_content">
        <main>
            <div class="container-fluid px-4">

                <!-- Header Dashboard -->
                <div class="page-header">
                    <div>
                        <div class="page-title">
                            Dashboard
                            <span class="page-title-badge">Admin</span>
                        </div>
                        <ol class="breadcrumb mb-0">
                            <li class="breadcrumb-item">
                                <a th:href="@{/admin}">Trang quản trị</a>
                            </li>
                            <li class="breadcrumb-item active">Thống kê tổng quan</li>
                        </ol>
                    </div>
                    <div class="page-actions">
                        <button type="button" class="btn-refresh" onclick="location.reload()">
                            <i class="fas fa-rotate-right"></i>
                            Làm mới
                        </button>
                    </div>
                </div>

                <!-- Cards: User / Product / Order -->
                <div class="row g-3 mb-4">
                    <!-- Users -->
                    <div class="col-xl-4 col-md-6">
                        <div class="stat-card">
                            <div class="stat-card-header">
                                <div>
                                    <div class="stat-title">Người dùng</div>
                                    <div class="stat-value" th:text="${countUsers}">0</div>
                                    <div class="stat-chip">
                                        <i class="fas fa-user-check"></i>
                                        Tổng user trong hệ thống
                                    </div>
                                </div>
                                <div class="stat-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                            </div>
                            <div class="stat-footer">
                                <a class="stat-link" th:href="@{/admin/user}">
                                    Xem chi tiết
                                    <i class="fas fa-angle-right"></i>
                                </a>
                                <span class="stat-note">Quản lý tài khoản, phân quyền.</span>
                            </div>
                        </div>
                    </div>

                    <!-- Products -->
                    <div class="col-xl-4 col-md-6">
                        <div class="stat-card">
                            <div class="stat-card-header">
                                <div>
                                    <div class="stat-title">Sản phẩm</div>
                                    <div class="stat-value" th:text="${countProducts}">0</div>
                                    <div class="stat-chip">
                                        <i class="fas fa-box-open"></i>
                                        Tổng sản phẩm đang bán
                                    </div>
                                </div>
                                <div class="stat-icon">
                                    <i class="fas fa-boxes-stacked"></i>
                                </div>
                            </div>
                            <div class="stat-footer">
                                <a class="stat-link" th:href="@{/admin/product}">
                                    Xem chi tiết
                                    <i class="fas fa-angle-right"></i>
                                </a>
                                <span class="stat-note">Theo dõi tồn kho, trạng thái sản phẩm.</span>
                            </div>
                        </div>
                    </div>

                    <!-- Orders -->
                    <div class="col-xl-4 col-md-6">
                        <div class="stat-card">
                            <div class="stat-card-header">
                                <div>
                                    <div class="stat-title">Đơn hàng</div>
                                    <div class="stat-value" th:text="${countOrders}">0</div>
                                    <div class="stat-chip">
                                        <i class="fas fa-receipt"></i>
                                        Tổng đơn đặt hàng
                                    </div>
                                </div>
                                <div class="stat-icon">
                                    <i class="fas fa-cart-shopping"></i>
                                </div>
                            </div>
                            <div class="stat-footer">
                                <a class="stat-link" th:href="@{/admin/order}">
                                    Xem chi tiết
                                    <i class="fas fa-angle-right"></i>
                                </a>
                                <span class="stat-note">Theo dõi trạng thái & doanh thu.</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Khu vực chart sau này -->
                <!--
                <div class="row">
                    <div class="col-xl-8">
                        <div class="card mb-4">
                            <div class="card-header">
                                <i class="fas fa-chart-line me-1"></i>
                                Doanh thu theo tháng
                            </div>
                            <div class="card-body"><canvas id="myAreaChart"></canvas></div>
                        </div>
                    </div>
                </div>
                -->

            </div>
        </main>

        <!-- Footer -->
        <div th:replace="~{admin/layout/footer :: footer}"></div>
    </div>
</div>

<!-- Scripts -->
<script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js}" crossorigin="anonymous"></script>
<script th:src="@{/js/scripts.js}"></script>
<script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js}" crossorigin="anonymous"></script>
<script th:src="@{/js/chart-area-demo.js}"></script>
<script th:src="@{/js/chart-bar-demo.js}"></script>
<script th:src="@{https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js}" crossorigin="anonymous"></script>
<script th:src="@{/js/datatables-simple-demo.js}"></script>

</body>
</html>
